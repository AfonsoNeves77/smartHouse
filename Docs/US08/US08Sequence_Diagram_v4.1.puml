@startuml
title User Story 08 - Main Success Scenario
autonumber

participant ":DeactivateDeviceCTLR" as C
participant ":DeviceService" as DS
participant ":DeviceRepository" as DR
participant ":DeviceMapper" as DVM
participant ":DeviceDTO" as DTO
participant "DeviceIDVO :DeviceIDVO" as DVO
participant "dev:Device" as D
participant "status:DeviceStatus" as DVST
participant "deviceStatus:DeviceStatus" as DVS


[o-> C : deactivateDevice(DeviceDTO)
activate C
C -> DVM : getDeviceIdVO(DeviceDTO)
activate DVM
DVM -> DTO : getDeviceID()
activate DTO
DTO --> DVM : deviceIDVO
deactivate DTO
DVM -> DVO** : create(deviceIDVO)
DVM --> C : DeviceIDVO
deactivate DVM
C -> DS : deactivateDevice(DeviceIDVO)
activate DS
DS -> DR : findByID(DeviceIDVO)
activate DR
DR --> DS : dev
deactivate DR

DS -> DS : isActive(dev)
activate DS

DS -> D : getStatus()
activate D
D -> DS : status
deactivate D
DS -> DVST : getValue()
activate DVST
DVST --> DS : true
deactivate DVST
deactivate DS
DS -> D : deactivateDevice()
activate D
D -> DVS** : create(false)
D --> DS : true
deactivate D
DS --> C : true
deactivate DS
[o<-- C : true
deactivate C




@enduml