@startuml

title <size: 30> US05v2 Class Diagram

note "<b>Only methods related to\n<b>US05v2 are represented" as N1

skinparam linetype ortho

class AddDeviceToRoomCTRL{
    - roomService : RoomService
    - deviceService : DeviceService

    + AddDeviceToRoomCTRL(roomService : RoomService, deviceService : DeviceService)
    + addDeviceToRoom(deviceDTO : DeviceDTO, roomDTO : RoomDTO) : boolean
    - createDevice(deviceDTO : DeviceDTO, roomID : RoomIDVO) : Device
}

class RoomService{
    - roomFactory : RoomFactory
    - roomRepository : RoomRepository

    + RoomService(roomFactory : RoomFactory, roomRepository : RoomRepository)
    + isPresent(roomID : RoomIDVO) : boolean
}

class RoomRepository <<Repository>>{
    - DATA : Map<RoomIDVO, Room>

    + isPresent(roomID : RoomIDVO) : boolean
}


class RoomDTOMapper{
    + createRoomIDVO(roomDTO : RoomDTO) : RoomIDVO
}


class RoomDTO{
    - roomID : String
    - roomName : String
    - floor : int
    - roomWidth : double
    - roomLength : double
    - roomHeight : double

    + RoomDTO(strRoomName, intHouseFloor, dbRoomWidth, dbRoomLength, dbRoomHeight)
    + getRoomID() : String
}



class Room <<Entity>> <<Root>>{
    - roomID : RoomIDVO
    - roomName : RoomNameVO
    - floor : RoomFloorVO
    - roomDimensions : RoomDimensionsVO
    - houseID : HouseIDVO
}

class DeviceService{
    - deviceFactory : DeviceFactory
    - deviceRepository : DeviceRepository

    + DeviceService(deviceFactory : DeviceFactory, deviceRepository : DeviceRepository)
    + createDevice(deviceName : deviceNameVO, deviceModel : DeviceModelVO, \nroomID : RoomIDVO) : Device
    + saveDevice(device : Device) : boolean
}

class DeviceFactory {
    + createDevice(deviceName : deviceNameVO, deviceModel : DeviceModelVO, \nroomID : RoomIDVO) : Device
}

class RoomIDVO <<Value Object>><<ID>>{
    - identifier : UUID
    + RoomID(identifier : UUID)
}

class DeviceDTOMapper{
    + createDeviceNameVO(deviceDTO : DeviceDTO) : DeviceNameVO
    + createDeviceModelVO(deviceDTO : DeviceDTO) : DeviceModelVO
}

class DeviceDTO{
    - deviceID : String
    - deviceName : String
    - deviceModel : String
    - deviceStatus : String

    + DeviceDTO(deviceName : String, deviceModel : String)
    + getDeviceName() : String
    + getDeviceModel() : String
}

class DeviceIDVO <<Value Object>><<ID>>{
    - identifier : UUID

    + DeviceIDVO(identifier : UUID)
}

class DeviceNameVO <<Value Object>>{
    - deviceName : String

    + DeviceNameVO(deviceName : String)
}

class DeviceModelVO <<Value Object>>{
    - deviceModel : String

    + DeviceModelVO(deviceModel : String)
}

class DeviceStatusVO <<Value Object>>{
    - deviceStatus : boolean
    + DeviceStatusVO(deviceStatus : boolean)
}


class Device <<Entity>> <<Root>>{
    - deviceID : DeviceIDVO
    - deviceName : DeviceNameVO
    - deviceModel : DeviceModelVO
    - deviceStatus : DeviceStatusVO
    - roomID : RoomIDVO

    + Device(deviceName : DeviceNameVO, deviceModel : DeviceModelVO, roomID : RoomIDVO)
}

class DeviceRepository <<Repository>>{
     - DATA : Map<DeviceIDVO, Device>

     + save(device : Device) : boolean
     + isPresent(deviceID : DeviceIDVO) : boolean
     - validEntity(device : Device) : boolean
}

interface Repository<T> {
    + save(entity : T) : boolean
    + findAll() : Iterable<T>
    + findByID(ID : DomainID) : T
    + isPresent(ID : DomainID) : boolean
}


'interface DomainID {
'    + getID() : String
'}


interface DomainEntity {
    + getID() : DomainID
}


AddDeviceToRoomCTRL ..> RoomDTOMapper
AddDeviceToRoomCTRL ....> DeviceDTOMapper
DeviceDTOMapper .left.> DeviceDTO
AddDeviceToRoomCTRL ..left> RoomService
AddDeviceToRoomCTRL ..right> DeviceService
RoomDTOMapper .down.> RoomDTO
/'missing relationship between RoomMapper and RoomID?'/

RoomService ..left> RoomRepository
DeviceService ..right> DeviceRepository
DeviceService ..> DeviceFactory
DeviceDTOMapper ..> DeviceNameVO : <create>
DeviceDTOMapper ..> DeviceModelVO : <create>
DeviceFactory ..> Device : <create>


Device "1" o-- "1" RoomIDVO
Room "1" *-- "1" RoomIDVO
Device "1" o-up- "1" DeviceNameVO
Device "1" o-left- "1" DeviceModelVO
Device "1" *-- "1" DeviceIDVO
Device "1" *-- "1" DeviceStatusVO

Repository <|.. RoomRepository
Repository <|.. DeviceRepository
DeviceRepository "1" o-- "*" Device
RoomRepository "1" o--- "*" Room

Room ...|> DomainEntity
Device ...|> DomainEntity
'DomainID <|.. RoomIDVO
'DomainID <|.up. DeviceIDVO


@enduml